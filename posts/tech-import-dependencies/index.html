<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vinamr Sachdeva">
<meta name="dcterms.date" content="2023-07-17">

<title>Vinamr Sachdeva - Strategic technology import dependencies</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Vinamr Sachdeva</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/vinamrsachdeva" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/vinamrsachdeva" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Strategic technology import dependencies</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">war</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Vinamr Sachdeva </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 17, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#on-machine-tools" id="toc-on-machine-tools" class="nav-link active" data-scroll-target="#on-machine-tools"><span class="header-section-number">1</span> On machine tools</a>
  <ul class="collapse">
  <li><a href="#shift-to-cnc-machines" id="toc-shift-to-cnc-machines" class="nav-link" data-scroll-target="#shift-to-cnc-machines"><span class="header-section-number">1.1</span> Shift to CNC machines</a></li>
  <li><a href="#production-chain-of-the-missiles-that-s400-fires" id="toc-production-chain-of-the-missiles-that-s400-fires" class="nav-link" data-scroll-target="#production-chain-of-the-missiles-that-s400-fires"><span class="header-section-number">1.2</span> Production chain of the missiles that S400 fires</a></li>
  <li><a href="#asymmetric-geographical-distribution-of-machine-tools-production" id="toc-asymmetric-geographical-distribution-of-machine-tools-production" class="nav-link" data-scroll-target="#asymmetric-geographical-distribution-of-machine-tools-production"><span class="header-section-number">1.3</span> Asymmetric geographical distribution of machine tools production</a></li>
  </ul></li>
  <li><a href="#goldilocks-zone-for-wealth-creation" id="toc-goldilocks-zone-for-wealth-creation" class="nav-link" data-scroll-target="#goldilocks-zone-for-wealth-creation"><span class="header-section-number">2</span> Goldilocks zone for wealth creation</a>
  <ul class="collapse">
  <li><a href="#violent-entrepreneurs" id="toc-violent-entrepreneurs" class="nav-link" data-scroll-target="#violent-entrepreneurs"><span class="header-section-number">2.1</span> Violent entrepreneurs</a></li>
  <li><a href="#distance-from-power-is-associated-with-complexity-of-industry-but-inversly-related-to-the-probability-that-itll-exist" id="toc-distance-from-power-is-associated-with-complexity-of-industry-but-inversly-related-to-the-probability-that-itll-exist" class="nav-link" data-scroll-target="#distance-from-power-is-associated-with-complexity-of-industry-but-inversly-related-to-the-probability-that-itll-exist"><span class="header-section-number">2.2</span> Distance from power is associated with complexity of industry but inversly related to the probability that it’ll exist</a></li>
  </ul></li>
  <li><a href="#on-china" id="toc-on-china" class="nav-link" data-scroll-target="#on-china"><span class="header-section-number">3</span> On China</a>
  <ul class="collapse">
  <li><a href="#china-cannot-substitute-western-machine-tool-imports" id="toc-china-cannot-substitute-western-machine-tool-imports" class="nav-link" data-scroll-target="#china-cannot-substitute-western-machine-tool-imports"><span class="header-section-number">3.1</span> China CANNOT substitute Western machine tool imports</a></li>
  <li><a href="#chinas-chokepoints-i-guess-its-safe-to-assume-that-all-would-also-be-indias-chokepoints" id="toc-chinas-chokepoints-i-guess-its-safe-to-assume-that-all-would-also-be-indias-chokepoints" class="nav-link" data-scroll-target="#chinas-chokepoints-i-guess-its-safe-to-assume-that-all-would-also-be-indias-chokepoints"><span class="header-section-number">3.2</span> China’s chokepoints (I guess it’s safe to assume that all would also be India’s chokepoints)</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>I came across some posts by <a href="https://twitter.com/kamilkazani">Kamil Galeev</a> in which he discusses the strategic importance of machine tools and the broader concept of building an economy for war. I’m listing these posts here, along with a summary and some of my commentary for each, as many of them are behind a paywall. I’ll keep adding new posts here as I read them on Kamil’s substack and Twitter, so if you want to be updated either follow Kamil or check this page every few weeks or months.</p>
<section id="on-machine-tools" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="on-machine-tools"><span class="header-section-number">1</span> On machine tools</h2>
<section id="shift-to-cnc-machines" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="shift-to-cnc-machines"><span class="header-section-number">1.1</span> Shift to CNC machines</h3>
<p><a href="https://kamilkazani.substack.com/p/the-mechatronic-revolution-and-its">Substack</a> (behind a paywall)</p>
<p>This is a primer on the evolution of manufacturing from manual to digital control systems. It describes a progression that began with manually drawing a blueprint of a component and interpreting it, followed by operating machine tools with human sensory feedback. Starting in the 1960s, this process transitioned to drawing and interpreting blueprints, then programming numerical control (NC) machines by feeding them a perforated tape with instructions, with the NC machine performing the machining. In the 1970s, this evolved into the use of computer numeric control (CNC) machines. Finally, in the 1990s, with the development of Computer Aided Design (CAD) and Computer Aided Manufacturing (CAM) software, the process further advanced to creating drawings using CAD software, converting these drawings into instructions for the CNC machine using CAM, and having the CNC machine execute the machining. Each step improved accuracy while also reducing the need for a highly specialized workforce built by passing knowledge from senior workers to juniors through apprenticeship.</p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa925febc-26f1-44b9-9c48-a1d90891ae44_1304x332.jpeg" class="img-fluid"></p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3889aa32-ab15-443d-a470-3de86b32aa6a_1372x338.jpeg" class="img-fluid"></p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe37bd209-fb3b-490a-a2fd-cddf79138c2b_1330x616.jpeg" class="img-fluid"></p>
</section>
<section id="production-chain-of-the-missiles-that-s400-fires" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="production-chain-of-the-missiles-that-s400-fires"><span class="header-section-number">1.2</span> Production chain of the missiles that S400 fires</h3>
<p><a href="https://kamilkazani.substack.com/p/why-is-russia-winning">Substack</a> (not behind a paywall)</p>
<p>Even though the post is on why Russia is winning the war in Ukraine, it’s more of a brief introduction to the production chain of the missiles that Russia’s S400 missile system fires.</p>
<ol type="1">
<li><p><em>Casting</em> - pour molten metal into a mould/die. This step is totally manual.</p></li>
<li><p><em>Pressing, forging, stamping</em> - shape the metal with compressive force to increase its strength or give it a desired form. THis process utilizes machines but they’re fairly old and (I guess) not computer-controlled.</p></li>
<li><p><em>Machining</em> - further remove unwanted material from the pressing-foreging-stamping stage using lathes, milling and drilling machines, etc. This stage is most affected from the transition to digital control, which also leads to asymmetric power among countries, a factor that can be exploited.</p></li>
<li><p><em>Coating</em> - to cover it with a layer to prevent corrosion, increase surface strength or reduce friction, etc. It encompasses a broad range of processes, some of which are automated, while others are not.</p></li>
<li><p><em>Assembly, wiring</em> - the least automated</p></li>
</ol>
<p>It’s <strong>not</strong> behind a paywall and includes video clips showing all processes listed below, so I’d recommend watching them and reading the entire post. The clips <a href="https://open.substack.com/pub/kamilkazani/p/why-is-russia-winning?r=cvj1s&amp;utm_campaign=comment-list-share-cta&amp;utm_medium=web&amp;comments=true&amp;commentId=45019601">have been taken</a> from <a href="https://youtu.be/dd4eoXVclN0?si=jVnyMdDq1MgjMrwu">this video</a>.</p>
<p>In a recent Twitter thread, he <a href="https://twitter.com/kamilkazani/status/1730977180920721537">shared</a> a graph illustrating the difference in importance of various stages in the production processes of the <a href="https://twitter.com/kamilkazani/status/1730661181688328690">Sineva SLBM</a> at <a href="https://en.wikipedia.org/wiki/Krasnoyarsk_Machine-Building_Plant">KrasMash</a>.</p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fec90af9b-5446-4fa2-85ff-aa98b728bff0_1326x1280.jpeg" class="img-fluid"></p>
<p>I don’t know what the y-axis is. My best guess would be that it’s either time taken by each process or the cost. I think it being time is more probable.</p>
</section>
<section id="asymmetric-geographical-distribution-of-machine-tools-production" class="level3" data-number="1.3">
<h3 data-number="1.3" class="anchored" data-anchor-id="asymmetric-geographical-distribution-of-machine-tools-production"><span class="header-section-number">1.3</span> Asymmetric geographical distribution of machine tools production</h3>
<p><a href="https://kamilkazani.substack.com/p/who-produces-machine-tools?utm_source=substack&amp;utm_campaign=post_embed&amp;utm_medium=web">Substack</a> (behind a paywall)</p>
<p>The assymetric geographical distribution of machine tools production makes it a strategic chokepoint, given its importance in manufacturing weapon systems and other essential goods in the modern economy. The following figures from the piece effectively capture these regional disparities. (Note that it’s clearly visible in all of the figures that India has a very high dependence for machine tools but also that countries like China and Russia, which are also perceived as military behemoths by some, aren’t in a very good position either.)</p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F103cc274-cd07-44b3-99f5-dfea404b041a_1724x962.jpeg" class="img-fluid"></p>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 47%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>High capacity</th>
<th>Limited capacity</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>High capability</td>
<td>Western Europe, Japan</td>
<td>United States, United Kingdom</td>
</tr>
<tr class="even">
<td>Limited capability</td>
<td>Taiwan, South Korea, China (heavily limited)</td>
<td>Most industrial countries</td>
</tr>
</tbody>
</table>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F70f9d376-46ce-4e3f-a1d7-e98fdb633538_1410x1264.jpeg" class="img-fluid"></p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F97440dc6-c55d-4e17-98ab-cf03052f7b1e_1290x1262.jpeg" class="img-fluid"></p>
</section>
</section>
<section id="goldilocks-zone-for-wealth-creation" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="goldilocks-zone-for-wealth-creation"><span class="header-section-number">2</span> Goldilocks zone for wealth creation</h2>
<section id="violent-entrepreneurs" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="violent-entrepreneurs"><span class="header-section-number">2.1</span> Violent entrepreneurs</h3>
<p><a href="https://kamilkazani.substack.com/p/elon-musk">Substack</a> (Substack) (behind a paywall), <a href="https://twitter.com/kamilkazani/status/1579124072390463488">Twitter</a> (not behind a paywall)</p>
<p>Even though a critique on Elon Musk’s <a href="https://twitter.com/elonmusk/status/1576969255031296000">peace plan for the Ukaine-Russia conflict</a> (which is not my concern for the purpose of this post), this piece highlights the importance of weeding out “violent entrepreneurs” (straight-up criminals or politically connected insiders who use state machinery to get ahead of non-violent entrepreneurs) in letting “non-violent entrpeneurs” flourish, which is important for wealth creation. One major reason wealthy countries are affluent is that their governments have eliminated violent entrepreneurs and have not, or only to a lesser extent, become the sole monopolistic violent entrepreneurs themselves. In contrast, a significant reason for the lack of wealth in many developing countries is that their governments fail to eradicate violent entrepreneurs, allowing these violent actors to suppress non-violent entrepreneurs.</p>
</section>
<section id="distance-from-power-is-associated-with-complexity-of-industry-but-inversly-related-to-the-probability-that-itll-exist" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="distance-from-power-is-associated-with-complexity-of-industry-but-inversly-related-to-the-probability-that-itll-exist"><span class="header-section-number">2.2</span> Distance from power is associated with complexity of industry but inversly related to the probability that it’ll exist</h3>
<p><a href="https://kamilkazani.substack.com/p/avocado-economy-why-russia-cant-produce">Substack</a> (behind a paywall), <a href="https://twitter.com/kamilkazani/status/1501360272442896388">Twitter</a> (not behind a paywall)</p>
<p>The complexity of operating within an industry influences whether, and to what extent, nerds or mafia-like politically connected insiders dominate that industry. Alongside complexity, the importance of that industry for those dominated by that mafia influences whether that industry would even exist in that country in the first place. This explains why, for example, cartels control the entire avocado production in Mexico but not something complex — for something more complex, nerds will have to be accomodated and they pose a threat of replacing the mafia in the dominance hierarchy. In the context of Russia, President Putin’s close associates exert significant control over relatively simple extractive industries. This stands in contrast to the more complex industry of producing mining machines, which is primarily led by nerds who’re lower in the hierarchy and distanced from the administration.</p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F19fd320b-3f55-4ae5-b095-ad5042012162_1086x1018.jpeg" class="img-fluid"></p>
<p>In the mining business, those at the top of the hierarchy, who dominate the industry, rely on machines produced by those lower in the hierarchy. As a result, they allow these lower-tier operators to continue their operations, as disrupting their supply of critical equipment would be detrimental. This situation can be exploited, for instance, by resorting to importing machines — leading to a loss of business for those lower in the hierarchy and potentially push them even further down. The rise of nerds in the hierarchy is detrimental to the mafia, so they’ll do whatever it takes to prevent that from happening.</p>
</section>
</section>
<section id="on-china" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="on-china"><span class="header-section-number">3</span> On China</h2>
<section id="china-cannot-substitute-western-machine-tool-imports" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="china-cannot-substitute-western-machine-tool-imports"><span class="header-section-number">3.1</span> China CANNOT substitute Western machine tool imports</h3>
<p><a href="https://kamilkazani.substack.com/p/the-manufacturing-chain-does-china">Substack</a> (behind a paywall)</p>
<p>This piece critiques the narrative that Western export controls cannot significantly impact other economies (specifically Russia) because Western exports are smaller compared to China, and China can substitute them. Galeev employs the food chain analogy to explain that certain critical technologies, such as machine tools, may constitute a small percentage of the GDP or exports but are crucial for manufacturing consumer goods and weapon systems. These technologies are at the top of global supply chain even though they constitute a small percentage of the global GDP. This also happens in the animal kingdom, where, as you go higher in the food chain, the aggregate mass of the level drops, for example, in terms of aggregate mass, all the grass on Earth is heavier than all the herbivores, which are heavier than all the carnivores.</p>
</section>
<section id="chinas-chokepoints-i-guess-its-safe-to-assume-that-all-would-also-be-indias-chokepoints" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="chinas-chokepoints-i-guess-its-safe-to-assume-that-all-would-also-be-indias-chokepoints"><span class="header-section-number">3.2</span> China’s chokepoints (I guess it’s safe to assume that all would also be India’s chokepoints)</h3>
<p>An article that Galeev often cites, but did not write himself, is “<a href="https://cset.georgetown.edu/publication/chokepoints/">Chokepoints</a>” on “China’s Self-Identified Strategic Technology Import Dependencies” by Georgetown University’s CSET. This article describes China’s self-identified import dependencies as published in a Chinese state-affiliated newspaper <em>Science and Technology Daily</em>. These range from photo-lithography machines (a more well-known chokepoint for China given the sanctions imposed by the US in the recent past) to aviation design software​ — a total of 35 technologies. <a href="https://docs.google.com/spreadsheets/d/1e1qEMe5FDB_zvlKcu67CpNK2rlC7UFsa/edit#gid=2146773379">This spreadsheet</a>, attached in the article’s Appendix, contains a list of the technologies, leading global providers, the PRC providers, China’s difficulties, its catch-up efforts, and experts and papers cited.</p>
<div style="text-align: center">
<iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQMZJeev8bfwoToG05OIEiih417VkS5RGNt83QmMw2O4h-pLXSUyZYxPVE_41BOMw/pubhtml?gid=2146773379&amp;single=true&amp;widget=true&amp;headers=false" width="600" height="400">
</iframe>
</div>
<script src="https://utteranc.es/client.js" repo="vinamrsachdeva/vinamrsachdeva.github.io" issue-term="pathname" label="comments" theme="github-light" crossorigin="anonymous" async="">
</script>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>