<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vinamr Sachdeva">
<meta name="dcterms.date" content="2023-05-24">

<title>Vinamr Sachdeva - India’s natural resource rents (as per World Bank)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Vinamr Sachdeva</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/vinamrsachdeva" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/vinamrsachdeva" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">India’s natural resource rents (as per World Bank)</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">georgism</div>
                <div class="quarto-category">natural resources</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Vinamr Sachdeva </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 24, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#natural-resource-rents-as-a-percentage-of-gdp" id="toc-natural-resource-rents-as-a-percentage-of-gdp" class="nav-link active" data-scroll-target="#natural-resource-rents-as-a-percentage-of-gdp"><span class="header-section-number">1</span> Natural resource rents as a percentage of GDP</a></li>
  <li><a href="#natural-resource-rents-per-capita" id="toc-natural-resource-rents-per-capita" class="nav-link" data-scroll-target="#natural-resource-rents-per-capita"><span class="header-section-number">2</span> Natural resource rents per capita</a></li>
  <li><a href="#natural-resource-rents-per-capita-in-2021-inr-useful-to-know-the-impact-of-a-citizens-dividend" id="toc-natural-resource-rents-per-capita-in-2021-inr-useful-to-know-the-impact-of-a-citizens-dividend" class="nav-link" data-scroll-target="#natural-resource-rents-per-capita-in-2021-inr-useful-to-know-the-impact-of-a-citizens-dividend"><span class="header-section-number">3</span> Natural resource rents per capita in 2021 INR (useful to know the impact of a citizen’s dividend)</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>I’ve previously posted about the economic <a href="https://en.wikipedia.org/wiki/Resource_rent">rent</a> derived from India’s <a href="https://vinamrsachdeva.github.io/2022/10/12/rent-coal-oil-gas.html">coal, oil, and natural gas</a>, <a href="https://vinamrsachdeva.github.io/2022/11/26/sand-mining.html">sand</a> and <a href="https://vinamrsachdeva.github.io/2022/08/23/goa-iron-ore.html">iron ore in Goa</a>. In this post, I’m going to share the World Bank’s estimates of rents from all of India’s natural resources, including coal, oil, natural gas, minerals, and forests.</p>
<section id="natural-resource-rents-as-a-percentage-of-gdp" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="natural-resource-rents-as-a-percentage-of-gdp"><span class="header-section-number">1</span> Natural resource rents as a percentage of GDP</h2>
<p>Below are time series charts from the World Bank’s World Development Indicators datasets, showing our total natural resource rents as a percentage of GDP, followed by its components (coal, oil, natural gas, minerals, and forests) as a percentage of GDP as well.</p>
<iframe frameborder="0" height="400" scrolling="no" src="https://data.worldbank.org/share/widget?indicators=NY.GDP.TOTL.RT.ZS&amp;locations=IN" width="600">
</iframe>
<p><br> <iframe frameborder="0" height="400" scrolling="no" src="https://data.worldbank.org/share/widget?indicators=NY.GDP.COAL.RT.ZS&amp;locations=IN" width="600"></iframe><br> <iframe frameborder="0" height="400" scrolling="no" src="https://data.worldbank.org/share/widget?indicators=NY.GDP.PETR.RT.ZS&amp;locations=IN" width="600"></iframe><br> <iframe frameborder="0" height="400" scrolling="no" src="https://data.worldbank.org/share/widget?indicators=NY.GDP.NGAS.RT.ZS&amp;locations=IN" width="600"></iframe><br> <iframe frameborder="0" height="400" scrolling="no" src="https://data.worldbank.org/share/widget?indicators=NY.GDP.MINR.RT.ZS&amp;locations=IN" width="600"></iframe><br></p>
<p>It is important to note that the World Bank defines mineral rents as the resource rents from mining copper, gold, iron ore, lead, nickel, silver, and zinc according to their report “<a href="http://hdl.handle.net/10986/36400">The Changing Wealth of Nations 2021: Managing Assets for the Future</a>,” but it defines resource rents from mining tin, gold, lead, zinc, iron, copper, nickel, silver, bauxite, and phosphate according to <a href="https://data.worldbank.org/indicator/NY.GDP.MINR.RT.ZS?locations=IN">the page on their website</a> where the data has been sourced. This is the only dataset where there is some discrepancy; for the rest, the World Bank’s publications are consistent.</p>
<iframe frameborder="0" height="400" scrolling="no" src="https://data.worldbank.org/share/widget?indicators=NY.GDP.FRST.RT.ZS&amp;locations=IN" width="600">
</iframe>
<p><br></p>
<p>The World Bank details the sources used to estimate the rents in their report “<a href="http://hdl.handle.net/10986/36400">The Changing Wealth of Nations 2021: Managing Assets for the Future</a>” (TABLE A.6 contains the relevant text):</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F179aa12e-2e28-4045-ac6e-8c07305724a2_2392x1710.png" title="World Bank Sources" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">World Bank Sources</figcaption>
</figure>
</div>
<p>From this data and additional World Bank datasets, I’ve compiled more time series charts that display the rents for each natural resource classification in terms of their value per capita in INR (both in current prices and adjusted for inflation). Adjusting for inflation is crucial for understanding the significance of a potential citizen’s dividend. Additionally, I’ve included a time series chart that illustrates the contribution of each type to the total. All the data used to create these charts is published on <a href="https://www.kaggle.com/datasets/vinamrsachdeva/natres">Kaggle</a> and <a href="http://github.com/vinamrsachdeva/natres/">Github</a>. I recommend viewing the charts <a href="https://www.kaggle.com/code/vinamrsachdeva/natres-demo-visualizations">here</a> for an interactive experience (for example, you can hover over the points to see the exact (x,y) coordinates, zoom without losing quality, etc), but I have also attached them to this post for convenience.</p>
</section>
<section id="natural-resource-rents-per-capita" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="natural-resource-rents-per-capita"><span class="header-section-number">2</span> Natural resource rents per capita</h2>
<p>The following are per capita values for the rents (not adjusted for inflation) of total natural resource rents, all fossil fuels, and separately for coal, oil, natural gas, minerals, and forests.</p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F56e625c5-f0c1-4294-a56a-6bf5c6840154_1810x1068.png" class="img-fluid"></p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff4dd29ea-61c7-41cc-9316-32c99d01a3d5_1794x1064.png" class="img-fluid"></p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F645d2297-4daa-4930-b3d0-d56e445f36aa_1792x1066.png" class="img-fluid"></p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F725a1b85-93c2-477e-9b9a-bff98b383dd9_1790x1066.png" class="img-fluid"></p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F0698778c-84f9-4a49-a6d8-1c70344793b8_1790x1066.png" class="img-fluid"></p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F73b58248-f15d-482a-a2aa-16a4cd70c44a_1794x1068.png" class="img-fluid"></p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fccb36df1-1eda-463f-ab00-49be7b789fea_1790x1068.png" class="img-fluid"></p>
</section>
<section id="natural-resource-rents-per-capita-in-2021-inr-useful-to-know-the-impact-of-a-citizens-dividend" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="natural-resource-rents-per-capita-in-2021-inr-useful-to-know-the-impact-of-a-citizens-dividend"><span class="header-section-number">3</span> Natural resource rents per capita in 2021 INR (useful to know the impact of a citizen’s dividend)</h2>
<p>The following are the same figures as above but adjusted for inflation in constant 2021 INR. Adjusting for inflation might be important for someone who is interesting in knowing the effects of a citizen’s dividend sourced from natural resource rents.</p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3ada5c13-ab99-4c1e-ac5a-f297f024b026_1790x1070.png" class="img-fluid"></p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffa49d623-18c9-4e12-b80f-da143d889a50_1786x1066.png" class="img-fluid"></p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd1e07cae-671e-43ab-97a1-e53908181ca5_1792x1068.png" class="img-fluid"></p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F1789067a-97e5-4237-a292-de4d8ed57852_1790x1068.png" class="img-fluid"></p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fb68179cc-0886-47e9-9f07-8707cfb5dc85_1790x1066.png" class="img-fluid"></p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F3995a8ff-9c16-4a8d-b771-a9a5d52c5444_1794x1068.png" class="img-fluid"></p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa4b39262-c949-44c8-8e6a-4410752d5063_1782x1068.png" class="img-fluid"></p>
<p>And this is how various categories of natural resources have contributed differently to the aggregate rent over the years.</p>
<p><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5aa7d953-950a-412c-a71a-182618335b6d_1790x1064.png" class="img-fluid"></p>
<p>There are various factors that could lead to the government collecting less or more than the estimated rent from mining activities. These factors are extensively discussed in the reports “<a href="https://www.pwyp.org/pwyp-resources/many-ways-to-lose-a-billion/">Many ways to lose a billion</a>” by PWYP Canada and “<a href="https://www.imf.org/external/np/pp/eng/2012/081512.pdf">Fiscal Regimes for Extractive Industries: Design and Implementation</a>” by the International Monetary Fund (IMF). I plan to delve into these reasons in a follow-up post. (hat tip: <a href="https://twitter.com/rahulbasu/">Rahul Basu</a>)</p>
<script src="https://utteranc.es/client.js" repo="vinamrsachdeva/vinamrsachdeva.github.io" issue-term="pathname" label="comments" theme="github-light" crossorigin="anonymous" async="">
</script>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>