<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vinamr Sachdeva">
<meta name="dcterms.date" content="2021-02-15">

<title>Vinamr Sachdeva - If there’s evidence that school choice and performance pay for teachers work, why not try ‘teacher thoice’?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Vinamr Sachdeva</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/vinamrsachdeva" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/vinamrsachdeva" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://old.reddit.com/u/vinamrsachdeva" rel="" target=""><i class="bi bi-reddit" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:vinamrsachdeva@gmail.com" rel="" target=""><i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">If there’s evidence that school choice and performance pay for teachers work, why not try ‘teacher thoice’?</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">public education</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Vinamr Sachdeva </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 15, 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#school-choice" id="toc-school-choice" class="nav-link active" data-scroll-target="#school-choice"><span class="header-section-number">1</span> School Choice</a></li>
  <li><a href="#performance-pay-for-teachers" id="toc-performance-pay-for-teachers" class="nav-link" data-scroll-target="#performance-pay-for-teachers"><span class="header-section-number">2</span> Performance pay for teachers</a></li>
  <li><a href="#teacher-choice-and-performance-pay" id="toc-teacher-choice-and-performance-pay" class="nav-link" data-scroll-target="#teacher-choice-and-performance-pay"><span class="header-section-number">3</span> “Teacher choice and performance pay”</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>Some coverage of Karthik Muralidharan’s work on school choice and performance pay by <a href="https://marginalrevolution.com/about">Alex Tabarrok</a> on <a href="https://marginalrevolution.com/">Marginal Revolution</a>:</p>
<section id="school-choice" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="school-choice"><span class="header-section-number">1</span> School Choice</h2>
<blockquote class="blockquote">
<p><strong><a href="https://marginalrevolution.com/marginalrevolution/2014/02/private-schooling-in-india-results-from-a-randomized-trial.html">Private Schooling In India: Results from a Randomized Trial</a></strong></p>
<p>by&nbsp;<a href="https://marginalrevolution.com/about">Alex Tabarrok</a> February 5, 2014 at 7:28 am</p>
<p>Karthik Muralidharan&nbsp;runs very large, randomized controlled trials on education in India. His previous work showed that <a href="https://marginalrevolution.com/marginalrevolution/2013/03/shout-it-from-the-rooftops-performance-pay-for-teachers-in-india.html">performance pay for teachers in India</a> has large and significant improvements on student learning. In his <a href="http://bit.ly/LyN15b">latest paper</a> (with Venkatesh Sundararaman)&nbsp;he reports on the results of The Andhra Pradesh School Choice Project, a long-term randomized controlled trial covering over 6,000 students in 180 villages for four years (2008-2012). The study offered students a lottery for a private school scholarships and lottery winners were compared with non-winners. The results show modest improvements in learning for private school students and big increases in school productivity.</p>
<blockquote class="blockquote">
<p>We find that private school teachers have lower levels of formal education and training than public-school teachers, and are paid much lower salaries. On the other hand, private schools have a longer school day, a longer school year, smaller class sizes, lower teacher absence, higher teaching activity, and better school hygiene. After two and four years of the program, we find no difference between the test scores of lottery winners and losers on math and Telugu (native language). However, private schools spend significantly less instructional time on these subjects, and use the extra time to teach more English, Science, Social Studies, and Hindi. Averaged across all subjects, lottery winners score 0.13 σhigher, and students who attend private schools score 0.23 σhigher. We find no evidence of spillovers on public-school students who do not apply for the voucher, or on students who start out in private schools to begin with, suggesting that the program had no adverse effects on these groups. Finally, the mean cost per student in the private schools in our sample is less than a third of the cost in public schools. Our results suggest that private schools in this setting deliver (slightly) better test score gains than their public counterparts, and do so at substantially lower costs per student.</p>
</blockquote>
<p>As Karthik notes in a&nbsp;<a href="http://ideasforindia.in/article.aspx?article_id=245">Ideas for India short article</a>&nbsp;that summarizes:</p>
<blockquote class="blockquote">
<p>Since private schools achieved equal or better outcomes at one-third the cost, the fundamental question that needs to be asked is “How much better could private management do if they had three times their current level of per-child spending?”</p>
</blockquote>
<p>Is any economist doing more important work with greater potential for real improvement in the lives of millions than Karthik&nbsp;Muralidharan?</p>
</blockquote>
</section>
<section id="performance-pay-for-teachers" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="performance-pay-for-teachers"><span class="header-section-number">2</span> Performance pay for teachers</h2>
<blockquote class="blockquote">
<p><strong><a href="https://marginalrevolution.com/marginalrevolution/2009/09/teacher-performance-pay-experimental-evidence-from-india.html">Teacher Performance Pay: Experimental Evidence from India</a></strong></p>
<p>by&nbsp;<a href="https://marginalrevolution.com/about">Alex Tabarrok</a> September 30, 2009 at 7:39 am in <a href="https://marginalrevolution.com/marginalrevolution/category/economics">Economics</a> <a href="https://marginalrevolution.com/marginalrevolution/category/education">Education</a></p>
<p>In an <a href="http://econ.ucsd.edu/%7Ekamurali/teacher%20performance%20pay.pdf">impressive new paper</a>, Karthik Muralidharan and Venkatesh Sundararaman provide evidence on the power of teacher incentives to increase learning.&nbsp; The paper is impressive for three reasons:</p>
<ol type="1">
<li><p>Evidence comes from a very large sample, 500 schools covering approximately 55,000 students, and treatment regimes and controls are randomly assigned to schools in a careful, stratified design.&nbsp;</p></li>
<li><p>An individual-incentive plan and a group-incentive plan are compared to a control group <em>and</em> to two types of unconditional extra-spending treatments (a block grant and hiring an extra teacher).&nbsp; Thus the authors can test not only whether an incentive plan works relative to no plan but also whether an incentive plan works relative to spending a similar amount of money on “improving schools.”</p></li>
</ol>
<p>3)&nbsp;The authors understand incentive design and they test for whether their incentive plan reduces learning on non-performance pay margins.</p>
<p>The results are as follows:</p>
<blockquote class="blockquote">
<p>We find that the teacher performance pay program was highly effective in improving student learning. At the end of two years of the program, students in incentive schools performed significantly better than those in comparison schools by 0.28 and 0.16 standard deviations (SD) in math and language tests respectively….</p>
<p>We find no evidence of any adverse consequences as a result of the incentive programs. Incentive schools do significantly better on both mechanical components of the test (designed to reflect rote learning) and conceptual components of the test (designed to capture deeper understanding of the material),suggesting that the gains in test scores represent an actual increase in learning outcomes. Students in incentive schools do significantly better not only in math and language (for which there were incentives), but also in science and social studies (for which there were no incentives), suggesting positive spillover effects….</p>
<p>School-level group incentives and teacher-level individual incentives perform equally well in the first year of the program, but the individual incentive schools significantly outperformed the group incentive schools in the second year….</p>
<p>We find that performance-based bonus payments to teachers were a significantly more cost effective way of increasing student test scores compared to spending a similar amount of money unconditionally on additional schooling inputs.</p>
<p>Surprisingly, since <a href="http://www.marginalrevolution.com/marginalrevolution/2009/09/explaining-teacher-absence.html">absent teachers are a big problem in India</a>, reduced teacher absenteeism per se does not appear to be the primary mechanism by which incentives improve learning.&nbsp; Instead the primary mechanism appears to be more intensive teaching, including more homework and classwork and better attention to weaker students, this greatly increases the relevance of these results to teaching in the developed world.</p>
</blockquote>
<p><strong>Addendum:</strong> See also Karthik’s comments on the comments at 26.</p>
</blockquote>
<p>A follow-up:</p>
<blockquote class="blockquote">
<p><strong><a href="https://marginalrevolution.com/marginalrevolution/2013/03/shout-it-from-the-rooftops-performance-pay-for-teachers-in-india.html">Shout it from the Rooftops! Performance Pay for Teachers in India</a></strong></p>
<p>by&nbsp;<a href="https://marginalrevolution.com/about">Alex Tabarrok</a> March 22, 2013 at 7:26 am in <a href="https://marginalrevolution.com/marginalrevolution/category/data-source">Data Source</a> <a href="https://marginalrevolution.com/marginalrevolution/category/economics">Economics</a> <a href="https://marginalrevolution.com/marginalrevolution/category/education">Education</a></p>
<p>Several years ago <a href="https://marginalrevolution.com/marginalrevolution/2009/09/teacher-performance-pay-experimental-evidence-from-india.html">I reported</a> on a very large, <a href="http://www.jstor.org/stable/10.1086/659655">randomized experiment</a> (JSTOR) on teacher performance pay in India that showed that even modest incentives could significantly raise student achievement and do so not only in the incentivized subjects but also in other non-incentivized subjects, suggesting positive spillovers. The earlier paper looked at the first two years of the program. One of the authors, <a href="http://econ.ucsd.edu/~kamurali/research.html">Karthik Muralidharan</a>, now has a <a href="http://econ.ucsd.edu/~kamurali/papers/Working%20Papers/Long%20Term%20Effects%20of%20Teacher%20Performance%20Pay.pdf">follow-up paper</a>, showing what happens over 5 years. The results are impressive and important:</p>
<blockquote class="blockquote">
<p>Students who had completed their entire five years of primary school education under the program scored 0.54 and 0.35 standard deviations (SD) higher than those in control schools in math and language tests respectively. These are large effects corresponding to approximately 20 and 14 percentile point improvements at the median of a normal distribution, and are larger than the effects found in most other education interventions in developing countries (see Dhaliwal et al.&nbsp;2011).</p>
<p>Second, the results suggest that these test score gains represent genuine additions to human capital as opposed to reflecting only ‘teaching to the test’. Students in individual teacher incentive schools score significantly better on both non-repeat as well as repeat questions; on both multiple-choice and free-response questions; and on questions designed to test conceptual understanding as well as questions that could be answered through rote learning. Most importantly, these students also perform significantly better on subjects for which there were no incentives – scoring 0.52 SD and 0.30 SD higher than students in control schools on tests in science and social studies (though the bonuses were paid only for gains in math and language). There was also no differential attrition of students across treatment and control groups and no evidence to suggest any adverse consequences of the programs.</p>
<p>…Finally, our estimates suggest that the individual teacher bonus program was 15-20 times more cost effective at raising test scores than the default ‘education quality improvement’ policy of the Government of India, which is reducing class size from 40 to 30 students per teacher (Govt. of India, 2009).</p>
</blockquote>
<p>In another<a href="http://econ.ucsd.edu/~kamurali/papers/Working%20Papers/Priorities%20for%20Primary%20Education%20Policy%20in%20India.pdf">&nbsp;important paper</a>,&nbsp;written for the Government of India,&nbsp;Muralidharan&nbsp;summarizes the best research on public schools in developing countries. His conclusion is that there are&nbsp;demonstrably&nbsp;effective and feasible policies that could improve the public schools thereby increasing literacy and numeracy rates and raising the incomes of millions of people.</p>
<p>The generation entering Indian schools today is the largest that has ever, or for the foreseeable future, will ever enter Indian schools so the opportunity to raise educational quality for essentially the entire Indian workforce over the next several generations is truly immense.</p>
</blockquote>
</section>
<section id="teacher-choice-and-performance-pay" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="teacher-choice-and-performance-pay"><span class="header-section-number">3</span> “Teacher choice and performance pay”</h2>
<p>One can think of school choice as a “performance pay for schools,” where their pay is judged by (proportional to) the number of students (or rather their parents) who choose that particular school. Why not also give students a choice to choose their teachers? Private schools may or may not choose to implement such a program themselves but the government could implement it <em>universally</em> for all public schools, where students would have an option to choose to attend any public school teacher’s class, or <em>within</em> public schools, where students would have an option to choose to attend any teacher’s class within the public school they’re enrolled in. Club this with performance pay and maybe it’ll end up improving public school performance and help public schools compete against private schools in the presence of a school choice program? Rahul Mehta <a href="https://www.rahulmehta.com/edu02.htm">had proposed this system</a> long back. In his system, students get to choose their teachers (anyone can register themselves as a teacher) and the government pays teachers directly based on their students’ performance in tests.</p>
<script src="https://utteranc.es/client.js" repo="vinamrsachdeva/vinamrsachdeva.github.io" issue-term="pathname" label="comments" theme="github-light" crossorigin="anonymous" async="">
</script>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>